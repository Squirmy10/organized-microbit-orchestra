{"entries":[{"timestamp":1772043687093,"editorVersion":"8.0.18","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":2,"length1":44,"diffs":[[1,"    \"name\": \"microbit-orchestra\",\n"]]}]},{"type":"added","filename":"main.blocks","value":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>"},{"type":"added","filename":"main.ts","value":"\n"}]}],"snapshots":[{"timestamp":1772043685754,"editorVersion":"8.0.18","text":{"README.md":"# Orchestra Extension for micro:bit\n\nOrchestral composition extension for MakeCode with full BPM control, dynamics, and radio synchronization.\n\n## Features\n\n- **Musical Notation:** Full control using whole, half, quarter, eighth, and sixteenth notes.\n- **BPM Tempo Control:** Set precise speeds ranging from 40 to 240 BPM.\n- **Dynamic Markings:** Control volume through standard notation (pp, p, mf, f, ff).\n- **Key Signature Control:** Set a global key signature for the entire composition.\n- **Note Ties:** Functionality to tie the duration of a previous note to the next.\n- **Light Control:**\n  - Progress Bar: Track song completion on the LED grid.\n  - Dynamic Brightness: LEDs glow based on current orchestral volume.\n  - Pitch Plotting: Real-time visual mapping of note pitches to LED coordinates.\n- **Radio Synchronization:** Conductor mode to trigger synchronized starts for the whole orchestra.\n\n## Block Samples\n\n### Basic Composition\n```blocks\nOrchestra.setOrchestraTempo(120)\nOrchestra.setDynamic(Dynamic.MF)\nOrchestra.playNote(Note.C, NoteDuration.Quarter)\nOrchestra.tieToNextNote()\nOrchestra.playNote(Note.C, NoteDuration.Half)\n```\n\n### Visual Performance\n```blocks\nOrchestra.syncBrightness()\nOrchestra.plotPitch(Note.G)\nOrchestra.showProgress(1, 10)\n```\n\n## Use as Extension\n\nThis repository can be added as an extension in MakeCode.\n\n1. Open https://makecode.microbit.org/\n2. Click on **New Project**\n3. Click on **Extensions** under the gearwheel menu\n4. Search for `https://github.com/squirmy10/microbit-orchestra` and import\n\n## Edit this Project\n\nTo edit this repository in MakeCode:\n\n1. Open https://makecode.microbit.org/\n2. Click on **Import** then click on **Import URL**\n3. Paste `https://github.com/squirmy10/microbit-orchestra` and click import\n\n## Supported Targets\n\n- for PXT/microbit\n\n---\n\n**Metadata:** for PXT/microbit","custom.ts":"/**\n * Orchestra Extension for micro:bit\n * Orchestral composition with key signatures, dynamics, and radio control\n */\n\n//% color=#ECA40D icon=\"\\uf001\" weight=100 block=\"Orchestra\"\nnamespace orchestra {\n\n    /**\n     * Common Key Signatures\n     */\n    export enum KeySignature {\n        //% block=\"C Major / A Minor\"\n        C = 0,\n        //% block=\"G Major / E Minor\"\n        G = 1,\n        //% block=\"F Major / D Minor\"\n        F = -1,\n        //% block=\"D Major / B Minor\"\n        D = 2,\n        //% block=\"Bb Major / G Minor\"\n        Bb = -2\n    }\n\n    /**\n     * Musical notation durations\n     */\n    export enum NoteDuration {\n        //% block=\"whole\"\n        Whole = 4,\n        //% block=\"half\"\n        Half = 2,\n        //% block=\"quarter\"\n        Quarter = 1,\n        //% block=\"eighth\"\n        Eighth = 0.5,\n        //% block=\"sixteenth\"\n        Sixteenth = 0.25\n    }\n\n    /**\n     * Orchestral dynamic markings\n     */\n    export enum Dynamic {\n        //% block=\"pp\"\n        PP = 45,\n        //% block=\"p\"\n        P = 80,\n        //% block=\"mf\"\n        MF = 130,\n        //% block=\"f\"\n        F = 180,\n        //% block=\"ff\"\n        FF = 255\n    }\n\n    let currentVolume = Dynamic.MF;\n    let currentKey = KeySignature.C;\n\n    /**\n     * Sets the key signature for the orchestra.\n     */\n    //% block=\"set key signature to $key\"\n    //% weight=85\n    export function setKeySignature(key: KeySignature): void {\n        currentKey = key;\n    }\n\n    /**\n     * Plays a single note sequentially.\n     */\n    //% block=\"play note $note for $duration\"\n    //% note.shadow=\"device_note\"\n    //% weight=100\n    export function playNote(note: number, duration: NoteDuration): void {\n        music.setVolume(currentVolume);\n        let beatLength = 60000 / music.tempo();\n        music.playTone(note, beatLength * duration);\n    }\n\n    /**\n     * Sets the dynamics for subsequent notes.\n     */\n    //% block=\"set dynamic to $dynamic\"\n    //% weight=90\n    export function setDynamic(dynamic: Dynamic): void {\n        currentVolume = dynamic;\n        music.setVolume(currentVolume);\n    }\n\n    /**\n     * Pauses the playback for a specific duration.\n     */\n    //% block=\"rest for $duration\"\n    //% weight=80\n    export function rest(duration: NoteDuration): void {\n        let beatLength = 60000 / music.tempo();\n        music.rest(beatLength * duration);\n    }\n\n    /**\n     * Sets a precise BPM for the orchestra.\n     */\n    //% block=\"set orchestra tempo to $bpm BPM\"\n    //% bpm.min=40 bpm.max=240 bpm.defl=120\n    //% weight=70\n    export function setOrchestraTempo(bpm: number): void {\n        music.setTempo(bpm);\n    }\n\n    // --- LIGHT CONTROL SECTION ---\n\n    /**\n     * Displays a progress bar on the LED grid.\n     */\n    //% block=\"show progress $current out of $total\"\n    //% weight=40\n    export function showProgress(current: number, total: number): void {\n        led.plotBarGraph(current, total);\n    }\n\n    /**\n     * Adjusts LED brightness based on volume.\n     */\n    //% block=\"update brightness to volume\"\n    //% weight=30\n    export function syncBrightness(): void {\n        led.setBrightness(currentVolume);\n    }\n\n    /**\n     * Plots a point on the LED grid based on pitch.\n     */\n    //% block=\"plot pitch $note\"\n    //% note.shadow=\"device_note\"\n    //% weight=20\n    export function plotPitch(note: number): void {\n        basic.clearScreen();\n        let index = note % 25;\n        let x = index % 5;\n        let y = Math.floor(index / 5);\n        led.plot(x, y);\n    }\n\n    // --- RADIO CONTROL SECTION ---\n\n    /**\n     * Sends a start signal via radio.\n     */\n    //% block=\"conductor send start signal $signal\"\n    //% weight=10\n    export function sendStartSignal(signal: number): void {\n        radio.sendNumber(signal);\n    }\n\n    /**\n     * Runs code when a radio signal is received.\n     */\n    //% block=\"on conductor signal $signal received\"\n    //% draggableParameters=\"reporter\"\n    //% weight=5\n    export function onSignalReceived(signal: number, handler: () => void): void {\n        radio.onReceivedNumber(function (receivedNumber: number) {\n            if (receivedNumber == signal) {\n                handler();\n            }\n        });\n    }\n}","test.ts":"","pxt.json":"{\n    \"name\": \"microbit-orchestra\",\n    \"version\": \"1.4.2\",\n    \"description\": \"Orchestral composition extension for MakeCode\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"music\": \"*\"\n    },\n    \"files\": [\n        \"README.md\",\n        \"custom.ts\",\n        \"test.ts\"\n    ],\n    \"testFiles\": [\n        \"test.ts\"\n    ],\n    \"targetVersions\": {\n        \"target\": \"8.0.18\",\n        \"targetId\": \"microbit\"\n    },\n    \"supportedTargets\": [\n        \"microbit\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}}],"shares":[],"lastSaveTime":1772043727360}